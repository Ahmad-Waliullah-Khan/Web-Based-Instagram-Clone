{% load static %}
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Advance Photo App | Upload</title>

    <link rel="shortcut icon" type="image/png" href="{% static 'images/icons/favicon.png' %}"/>

    <!-- dropzone css -->
    <link href="{% static "css/dropzone.min.css" %}" rel="stylesheet">
    <link href="{% static "css/basic.min.css" %}" rel="stylesheet">

    <!-- bootstrap styling -->
    <link href="{% static "vendor/bootstrap/css/bootstrap.min.css" %}" rel="stylesheet">

    <!-- jQuery -->
    <script src="{% static "vendor/jquery/jquery.min.js" %}"></script>

    <!-- Bootstrap core JavaScript -->
    <script src="{% static "vendor/bootstrap/js/bootstrap.bundle.min.js" %}"></script>

  </head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
<a class="navbar-brand" href="{% url 'home:home' %}">Photo App</a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
  <span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarNav">
  <ul class="navbar-nav">
    <li class="nav-item">
      <a class="nav-link pull-right" href="{% url 'home:home' %}">Gallery</a>
    </li>
  </ul>
</div>
</nav>
<hr>

<div class="container">
  <form action="{% url 'gallery:upload-photos' %}" method="post" enctype="multipart/form-data" class="dropzone"
    id="my-awesome-dropzone">
    {% csrf_token %}
      <p>{{ form.non_field_errors }}</p>
      <p>{{ form.errors }}</p>
      {% for field in postForm %}
        {{ field }} <br />
      {% endfor %}
      <div class="fallback">
           <input name="photo" type="file" multiple />
       </div>
  </form>
</div>



</body>

  <!-- dropzone JavaScript -->
  <script src = "https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.7.0/dropzone.min.js"></script>

  <script type="text/javascript">
  window.onload = function() {
    Dropzone.options.myDropzone ={
        paramName: "photo", // name of input
        autoProcessQueue : true,
        parallelUploads: 1,

        init :  function (){
            this.on( "success", function( file, responseText){
                // event launched at the end of uploading images queued
                console.log( responseText );
                alert(responseText);
            });
            this.on("error", function(file, response) {
                // do stuff here.
                alert(response);

            });
        }
    };
  };
    </script>

</html>
